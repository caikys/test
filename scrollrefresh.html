<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <script src="js/jquery-1.11.3.min.js"></script>
    </head>
    <style>
    *{
    	margin: 0px;
    	padding: 0px;
    }
     html,body{
     	width: 100%;
     	height: 100%;
     }
      .d0{
      	width: 100%;
      	height: 150%;
      	background-color: red;
      	display: block;
        float: left;
      }
      .d1{
      	width: 100%;
      	display: block;
      	float: left;
      }
      .d1 >ul{
      	width: 100%;
      	text-decoration: none;
      }
      .d1 > ul > li{
      	display: block;
      	margin-top: 80px;
      	width: 60%;
      	height: 300px;
      	background-color: blue;
      	margin: 0 auto;
      	margin-top: 50px;
      }
    </style>
    <body>
    <div class="d0"></div>
     <div class="d1">
       <ul>
    
       </ul>
     </div>
    </body>
  <script>
     var curlength = 10;
     var flag1 = true;
     var li_length = 0;
     $(window).scroll(function(){
         var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
         // console.log(scrollTop);
         // console.log($('body').height(),$('.d1 > ul').offset().top-scrollTop);
         // console.log($('.d1 >ul li').length);
         var w_height = $('body').height();
         var b = $('.d1 > ul').offset().top-scrollTop;
         if($('.d1 >ul li').length>0){
         	var a= $('.d1 > ul > li').eq(li_length-1).offset().top-scrollTop;
         	console.log(a);
         }
         if(w_height -b +1 >= 0){
         	if(flag1){
         	insert_li1(flag1);
           }else if( w_height - a -299 >= 0){
               insert_li();
           }
         }

         // var a = $('.d1 > ul > li').eq(li_length).offset().top-scrollTop; 
         // if( w_height - a -299 >= 0){ //299是li的高度
         //        // insert();
         //        console.log(1);
         // }
     });
     function insert_li1(flag){
     	if(flag&&li_length ==0){
             $('.d1 > ul').append('<li>'+li_length+'</li>');
             flag1 = !flag1;
          return li_length;
     	}else{
     		return;
     	}
     }
     function insert_li(){
     	if(li_length < curlength){
          $('.d1 > ul').append('<li>'+li_length+'</li>');
          return ++li_length;
      }
     }
  </script>
</html>